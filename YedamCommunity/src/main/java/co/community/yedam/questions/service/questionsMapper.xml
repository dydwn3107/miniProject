<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="co.community.yedam.questions.service.questionsMapper">

	<select id="questionsSelectList"
		resultType="co.community.yedam.questions.service.questionsVO">
		SELECT * FROM QUESTIONS
	</select>

	<!-- 동적 sql예시. id만 들어오면 찾아주고, 둘 다 들어오면 로그인 처리해주는 거 -->
	<select id="questionsSelect"
		resultType="co.community.yedam.questions.service.questionsVO">
		SELECT * FROM QUESTIONS
		WHERE questions_id = #{questionsId}

	</select>

	<select id="questionsSearchList"
		resultType="co.community.yedam.questions.service.questionsVO">
		select * from questions
		<if test="keyWord != null and keyWord !=''">
			Where #{keyField}.trim() like #{keyWord}.trim() order by questions_id
		</if>
		order by questions_id


	</select>

	<insert id="questionsInsert">
		<selectKey keyProperty="questionsId" resultType="int"
			order="BEFORE">
			SELECT CASE WHEN MAX(questions_ID) IS NULL THEN 1 ELSE
			MAX(questions_ID) + 1 END AS ID
			FROM questions
		</selectKey>
		insert into questions VALUES (#{questionsId}, #{questionsTitle},
		#{questionsContent}, #{questionsDate},#{memberId})
	</insert>

	<update id="questionsUpdate">
		UPDATE questions
		SET questions_title =
		#{questionsTitle},
		questions_content = #{questionsContent},
		questions_DATE = #{questionsDate}
		WHERE questions_id = #{questionsId}
	</update>

	<delete id="questionsDelete">
		DELETE from questions
		WHERE
		questions_id = #{questionsId}
	</delete>



</mapper>